{"version":3,"sources":["JS/decimalNotationRegEx.js","JS/ScreenComponents/Overview.js","JS/ScreenComponents/Refund.js","App.js","serviceWorker.js","index.js"],"names":["Number","prototype","toFixedDown","digits","re","RegExp","m","this","toString","match","parseFloat","valueOf","Overview","breakLine","node","breakTag","i","document","createElement","appendChild","buttonNode","innerNode","numOfInvoices","sessionStorage","getItem","getElementById","style","display","invoiceData","Array","invoiceKey","JSON","parse","j","setAttribute","onclick","objNum","textNode","createTextNode","invoice_no","description","sender","amount","vat","rate","refundAmount","innerHTML","id","className","Component","Refund","state","result","idList","refundPercentage","handleScan","data","setState","stringify","replace","invoiceNo","totalPrice","vatRate","vatAmount","nodes","textNodes","len","undefined","length","k","handleError","err","console","error","clearDataView","$","empty","confirmInvoice","parseInt","setItem","setTimeout","cancelInvoice","resetView","handleChange","e","target","value","percentageValue","currentRefundAmount","delay","onError","onScan","type","onChange","onClick","role","App","clear","log","data-toggle","data-target","aria-controls","aria-expanded","aria-label","to","path","exact","component","Boolean","window","location","hostname","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.500d03db.chunk.js","sourcesContent":["//This function is used to truncate decimal numbers to decimal places.\nNumber.prototype.toFixedDown = function(digits) {\n    var re = new RegExp(\"(\\\\d+\\\\.\\\\d{\" + digits + \"})(\\\\d)\"),\n        m = this.toString().match(re);\n    return m ? parseFloat(m[1]) : this.valueOf();\n};","/*\nCreated by Oualid Faouzi\nThis component is responsible for rendering the overview of the registered invoice data.\n\nNOTE: Session storage is used to store sensitive information about the user.\nSession storage was NOT designed to be used as a secured storage mechanism in a browser.\nIf an attacker runs Javascript, they can retrieve all the data stored in the sessionstorage\nand send it off to their own domain. This issue can be solved by integrating a database to store the data.\n*/\n\nimport React, {\n\tComponent\n} from 'react'\nimport '../../CSS/Overview.css'\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min'\n\nclass Overview extends Component {\n\tcomponentDidMount() {\n\t\tvar numOfInvoices = sessionStorage.getItem(\"numOfInvoicesRegistered\");\n\t\tvar buttonNode;\n\t\tvar textNode;\n\t\tvar innerNode;\n\t\t//When component mounts check if there is any invoices registered\n\t\tif (numOfInvoices != 0) {\n\t\t\tdocument.getElementById(\"infoMessage\").style.display = \"block\";\n\t\t\tvar invoiceData = new Array(numOfInvoices);\n\t\t\tvar invoiceKey = 1;\n\t\t\t//Loop through invoice data and store it in an array\n\t\t\tfor (var i = 0; i < numOfInvoices; i++) {\n\t\t\t\tinvoiceData[i] = JSON.parse(sessionStorage.getItem(\"obj\" + (invoiceKey).toString()));\n\t\t\t\tinvoiceKey++;\n\t\t\t}\n\t\t\t//Create list view with all data, every item in the list acts as a button which displays more information about it.\n\t\t\tfor (var j = 0; j < numOfInvoices; j++) {\n\t\t\t\tbuttonNode = document.createElement(\"button\");\n\t\t\t\tbuttonNode.setAttribute(\"class\", \"list-group-item list-group-item-action\");\n\t\t\t\tbuttonNode.setAttribute(\"id\", \"button\" + j);\n\t\t\t\tbuttonNode.onclick = (function(objNum, numOfInvoices){\n\t     \t\t\treturn function() {\n\t\t        \t\tdocument.getElementById(\"obj\" + objNum + \"view\").style.display = \"block\";\n\t\t        \t\tdocument.getElementById(\"goBackButton\").style.display = \"block\";\n\t\t        \t\tdocument.getElementById(\"infoMessage\").style.display = \"none\";\n\t\t        \t\tfor(var i = 0; i < numOfInvoices; i++) {\n\t\t        \t\t\t\tdocument.getElementById(\"button\" + i).style.display = \"none\";\n\t\t        \t\t}\n\t     \t\t\t}\n  \t\t\t\t})(j, numOfInvoices);\n  \t\t\t\ttextNode = document.createTextNode(\"Invoice Number: \" + invoiceData[j].invoice_no + \" - Description: \" + invoiceData[j].description);\n\t\t\t\tbuttonNode.appendChild(textNode);\n\t\t\t\tdocument.getElementById(\"invoiceList\").appendChild(buttonNode);\n\n\t\t\t\tinnerNode = document.createElement(\"div\");\n\t\t\t\tinnerNode.setAttribute(\"class\", \"card card-body\");\n\t\t\t\tinnerNode.setAttribute(\"id\", \"obj\" + j + \"view\");\n\t\t\t\tinnerNode.setAttribute(\"style\", \"display: none;\");\n\n\t\t\t\ttextNode = document.createTextNode(\"Invoice Number: \" + invoiceData[j].invoice_no);\n\t\t\t\tinnerNode.appendChild(textNode);\n\n\t\t\t\tthis.breakLine(innerNode);\n\n\t\t\t\ttextNode = document.createTextNode(\"Description: \" + invoiceData[j].description);\n\t\t\t\tinnerNode.appendChild(textNode);\n\n\t\t\t\tthis.breakLine(innerNode);\n\n\t\t\t\ttextNode = document.createTextNode(\"Sender: \" + invoiceData[j].sender);\n\t\t\t\tinnerNode.appendChild(textNode);\n\n\t\t\t\tthis.breakLine(innerNode);\n\n\t\t\t\ttextNode = document.createTextNode(\"Total cost (VAT included): \" + invoiceData[j].amount + \" EUR\");\n\t\t\t\tinnerNode.appendChild(textNode);\n\n\t\t\t\tthis.breakLine(innerNode);\n\n\t\t\t\ttextNode = document.createTextNode(\"VAT rate: \" + invoiceData[j].vat[0].rate + \"%\");\n\t\t\t\tinnerNode.appendChild(textNode);\n\n\t\t\t\tthis.breakLine(innerNode);\n\n\t\t\t\ttextNode = document.createTextNode(\"VAT: \" + invoiceData[j].vat[0].amount + \" EUR\")\n\t\t\t\tinnerNode.appendChild(textNode);\n\n\t\t\t\tthis.breakLine(innerNode);\n\n\t\t\t\ttextNode = document.createTextNode(\"Total refund: \" + invoiceData[j].refundAmount + \" EUR\");\n\t\t\t\tinnerNode.appendChild(textNode);\n\n\t\t\t\tdocument.getElementById(\"invoiceList\").appendChild(innerNode);\n\t\t\t}\n\t\t//If there are no invoices registered display an empty message\n\t\t} else {\n\t\t\tvar node;\n\t\t\tvar textNode;\n\t\t\tnode = document.createElement(\"p\");\n\t\t\tnode.setAttribute(\"id\", \"emptyMessage\");\n\t\t\ttextNode = document.createTextNode(\"No invoices registered.\");\n\t\t\tnode.appendChild(textNode);\n\t\t\tdocument.getElementById(\"invoiceView\").appendChild(node);\n\t\t}\n\t\t//Render a back button to go back to the list view after an item in the list is clicked\n\t\tbuttonNode = document.createElement(\"button\");\n\t\tbuttonNode.setAttribute(\"class\", \"btn btn-secondary btn-lg\");\n\t\tbuttonNode.setAttribute(\"id\", \"goBackButton\");\n\t\tbuttonNode.setAttribute(\"style\", \"display: none;\");\n\t\tbuttonNode.onclick = (function(numOfInvoices){\n \t\t\treturn function() {\n\t    \t\tdocument.getElementById(\"goBackButton\").style.display = \"none\";\n\t    \t\tdocument.getElementById(\"infoMessage\").style.display = \"block\";\n\t    \t\tfor(var i = 0; i < numOfInvoices; i++) {\n\t    \t\t\tdocument.getElementById(\"obj\" + i + \"view\").style.display = \"none\";\n\t    \t\t\tdocument.getElementById(\"button\" + i).style.display = \"block\";\n\t    \t\t}\n \t\t\t}\n  \t\t})(numOfInvoices);\n\t\tbuttonNode.innerHTML = \"Go Back\";\n\t\tdocument.getElementById(\"invoiceList\").appendChild(buttonNode);\n\t}\n\n\t//Function used to append a br tag to a node\n\tbreakLine = node => {\n\t\tvar breakTag;\n\t\tfor (var i = 0; i < 2; i++) {\n\t\t\tbreakTag = document.createElement(\"br\");\n\t\t\tnode.appendChild(breakTag);\n\t\t};\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<p id=\"infoMessage\">Click an item in the list for more information</p>\n\t\t\t\t<div id=\"invoiceView\">\n\t\t\t\t\t<div className=\"list-group\" id=\"invoiceList\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Overview;","/*\nCreated by Oualid Faouzi for Visualisation & Application\nThis component is responsible for the QR code scanning function.\nLink to the QR scanner package:\nhttps://www.npmjs.com/package/react-qr-reader\n\nExample of QR code data in JSON:\n\n{\n\t \"sender\":\"IKEA BV\",\n\t \"invoice_no\":\"2020000042\",\n\t \"description\":\"Kallax\",\n\t \"amount\":59.95,\n\t \"vat\":[\n\t\t\t{\n\t\t\t\t \"rate\":21,\n\t\t\t\t \"amount\":10.4\n\t\t\t}\n\t ]\n}\nLink to the QR code:\nhttps://duckduckgo.com/?q=qr+code+%7B%22sender%22%3A+%22IKEA+BV%22%2C+%22invoice_no\n%22%3A+%222020000042%22%2C+%22description%22%3A+%22Kallax%22%2C+%22\namount%22%3A+59.95%2C+%22vat%22%3A+%5B+%7B+%22rate%22%3A+21%2C+%22\namount%22%3A+10.4+%7D+%5D+%7D&t=h_&ia=answer\n\nNOTE: Session storage is used to store sensitive information about the user.\nSession storage was NOT designed to be used as a secured storage mechanism in a browser.\nIf an attacker runs Javascript, they can retrieve all the data stored in the sessionstorage\nand send it off to their own domain. This issue can be solved by integrating a database to store the data.\n*/\nimport React, {\n\tComponent\n} from 'react';\nimport '../decimalNotationRegEx.js' //This import is used to truncate decimal numbers to decimal places.\nimport QrReader from 'react-qr-reader';\nimport $ from 'jquery';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '../../CSS/Refund.css';\n\nclass Refund extends Component {\n\tstate = {\n\t\tresult: 'No result',\n\t\tidList: [\n\t\t\t\"sender\",\n\t\t\t\"invoiceNo\",\n\t\t\t\"description\",\n\t\t\t\"price\",\n\t\t\t\"vatRate\",\n\t\t\t\"vatAmount\"\n\t\t],\n\t\trefundPercentage: 0,\n\t\trefundAmount: 0\n\t}\n\t//This function is called when the QR code scanner succesfully scanned.\n\thandleScan = data => {\n\t\tif (data && this.state.result === 'No result') {\n\t\t\tthis.setState({\n\t\t\t\tresult: JSON.parse(data)\n\t\t\t})\n\n\t\t\t//Reminder: find solution to static parsing to make the product scalable.\n\t\t\tvar sender = JSON.stringify(this.state.result.sender).replace(/\"/g, \"\");\n\t\t\tvar invoiceNo = JSON.stringify(this.state.result.invoice_no).replace(/\"/g, \"\");\n\t\t\tvar description = JSON.stringify(this.state.result.description).replace(/\"/g, \"\");\n\t\t\tvar totalPrice = JSON.stringify(this.state.result.amount);\n\t\t\tvar vatRate = JSON.stringify(this.state.result.vat[0].rate);\n\t\t\tvar vatAmount = JSON.stringify(this.state.result.vat[0].amount);\n\n\t\t\tvar nodes = new Array(6);\n\t\t\tvar textNodes = new Array(6);\n\t\t\tvar len = undefined;\n\n\t\t\tlen = nodes.length;\n\n\t\t\tfor (var i = 0; i < len; i++)\n\t\t\t\tnodes[i] = document.createElement(\"p\");\n\n\t\t\t//Reminder: find solution to static parsing to make the product scalable.\n\t\t\ttextNodes[0] = document.createTextNode(\"Sender: \" + sender);\n\t\t\ttextNodes[1] = document.createTextNode(\"Invoice number: \" + invoiceNo);\n\t\t\ttextNodes[2] = document.createTextNode(\"Product description: \" + description);\n\t\t\ttextNodes[3] = document.createTextNode(\"Total price: \" + totalPrice + \" EUR\");\n\t\t\ttextNodes[4] = document.createTextNode(\"VAT rate: \" + vatRate + \"%\");\n\t\t\ttextNodes[5] = document.createTextNode(\"VAT amount: \" + vatAmount + \" EUR\");\n\n\t\t\tlen = textNodes.length;\n\n\t\t\tfor (var j = 0; j < len; j++)\n\t\t\t\tnodes[j].appendChild(textNodes[j]);\n\n\t\t\tlen = this.state.idList.length;\n\n\t\t\tfor (var k = 0; k < len; k++)\n\t\t\t\tdocument.getElementById(this.state.idList[k]).appendChild(nodes[k]);\n\n\t\t\tdocument.getElementById(\"qrCanvas\").style.display = \"none\";\n\t\t\tdocument.getElementById(\"confirmationLayout\").style.display = \"block\";\n\t\t}\n\t}\n\t//This function is called when the QR code scanner returns an error. Error will be logged in console for development.\n\thandleError = err => {\n\t\tconsole.error(err)\n\t}\n\n\t//This function uses jquery to loop through all div elements and empty their contents. (div className = myResults)\n\tclearDataView = () => {\n\t\tthis.setState({\n\t\t\tresult: 'No result',\n\t\t\trefundPercentage: 0,\n\t\t\trefundAmount: 0\n\t\t})\n\t\tvar len = this.state.idList.length;\n\t\tvar id;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tid = this.state.idList[i];\n\t\t\t$('#' + id).empty();\n\t\t}\n\t\tdocument.getElementById(\"confirmationLayout\").style.display = \"none\";\n\t}\n\n\t//This function gets called when the user clicks on the confirm button and they want to refund the product.\n\tconfirmInvoice = () => {\n\t\t//If refund percentage is a valid input, confirm\n\t\tif (this.state.refundPercentage >= 1 && this.state.refundPercentage <= 100) {\n\t\t\tthis.state.result.refundPercentage = parseInt(this.state.refundPercentage);\n\t\t\tthis.state.result.refundAmount = parseFloat(this.state.refundAmount);\n\n\t\t\tvar numOfInvoices = sessionStorage.getItem(\"numOfInvoicesRegistered\");\n\t\t\tnumOfInvoices++;\n\n\t\t\tsessionStorage.setItem(\"obj\" + numOfInvoices, JSON.stringify(this.state.result));\n\n\t\t\tsessionStorage.setItem(\"numOfInvoicesRegistered\", numOfInvoices);\n\n\t\t\tthis.clearDataView();\n\t\t\tdocument.getElementById(\"loaderView\").style.display = \"block\";\n\t\t\t//Timeout is used to wait 4 seconds and display the custom css loading indicator\n\t\t\tsetTimeout(function(){\n\t\t\t\tdocument.getElementById(\"loaderView\").style.display = \"none\";\n\t\t\t\tdocument.getElementById(\"okButton\").style.display = \"block\";\n\t\t\t\tdocument.getElementById(\"confirmationAlert\").style.display = \"block\";\n\t\t\t}, 4000);\n\t\t//Else, give the user feedback and give the option to try it again\n\t\t} else {\n\t\t\tthis.clearDataView();\n\t\t\tdocument.getElementById(\"tryAgainButton\").style.display = \"block\";\n\t\t\tdocument.getElementById(\"inputAlert\").style.display = \"block\";\n\t\t}\n\t}\n\n\t//Function called when the user presses the cancel button.\n\tcancelInvoice = () => {\n\t\tthis.clearDataView();\n\t\tdocument.getElementById(\"tryAgainButton\").style.display = \"block\";\n\t\tdocument.getElementById(\"cancelAlert\").style.display = \"block\";\n\t}\n\n\t//Function called to reset all elements to their original state.\n\tresetView = () => {\n\t\tthis.clearDataView();\n\t\tdocument.getElementById(\"tryAgainButton\").style.display = \"none\";\n\t\tdocument.getElementById(\"okButton\").style.display = \"none\";\n\t\tdocument.getElementById(\"qrCanvas\").style.display = \"block\";\n\t\tdocument.getElementById(\"inputAlert\").style.display = \"none\";\n\t\tdocument.getElementById(\"cancelAlert\").style.display = \"none\";\n\t\tdocument.getElementById(\"confirmationAlert\").style.display = \"none\";\n\t\tdocument.getElementById(\"loaderView\").style.display = \"none\";\n\t}\n\n\t//This function is called when the user changes the input value of the refund percentage, it also gives an updated refund amount to give the user feedback.\n\thandleChange = (e) => {\n\t\tthis.setState({\n\t\t\trefundPercentage: e.target.value\n\t\t})\n\t\tvar percentageValue = document.getElementById(\"inputRefundPercentage\").value;\n\t\tif(percentageValue >= 1 && percentageValue <= 100) {\n\t\t\tvar initialPrice = parseFloat(this.state.result.amount);\n\t\t\tvar refundMultiplier = parseFloat((percentageValue / 100.0));\n\t\t\tvar currentRefundAmount = (initialPrice * refundMultiplier);\n\t\t\tcurrentRefundAmount = currentRefundAmount.toFixedDown(2);\n\t\t\tdocument.getElementById(\"refundPrice\").innerHTML = \"Price to be refunded: \" + currentRefundAmount + \" EUR\";\n\t\t\tthis.setState({\n\t\t\t\trefundAmount: currentRefundAmount\n\t\t\t})\n\t\t} else {\n\t\t\tdocument.getElementById(\"refundPrice\").innerHTML = \"Please enter a valid percentage value. (1 up to 100)\";\n\t\t}\n\t}\n\n\trender() {\n\t\tvar scanDelay = 300;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div id=\"loaderView\">\n\t\t\t\t\t<p id=\"loaderMessage\">Saving invoice data...</p>\n\t\t\t\t\t<div className=\"loader\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"qrCodeWindow\" id=\"qrCanvas\">\n\t\t\t\t\t<QrReader delay={scanDelay} onError={this.handleError} onScan={this.handleScan}/>\n\t\t\t\t\t<p>Use the camera of your device and scan the QR code.</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"myResults\">\n\t\t\t\t\t<div id=\"sender\"></div>\n\t\t\t\t\t<div id=\"invoiceNo\"></div>\n\t\t\t\t\t<div id=\"description\"></div>\n\t\t\t\t\t<div id=\"price\"></div>\n\t\t\t\t\t<div id=\"vatRate\"></div>\n\t\t\t\t\t<div id=\"vatAmount\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"confirmationLayout\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Specify the percentage of the invoice amount to be refunded (including VAT)</label>\n\t\t\t\t\t\t\t<input type=\"number\" className=\"form-control\" id=\"inputRefundPercentage\" value={this.state.refundPercentage} onChange={this.handleChange}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t\t<p id=\"refundPrice\">Please enter a valid percentage value. (1 up to 100)</p>\n\t\t\t\t\t<p>Do you want to refund this product?</p>\n\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary btn-lg\" onClick={this.confirmInvoice}>Confirm</button>\n\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary btn-lg\" onClick={this.cancelInvoice}>Cancel</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"alert alert-success\" id=\"confirmationAlert\" role=\"alert\">\n\t\t\t\t\tYou have successfully registered this invoice to be refunded!\n\t\t\t\t</div>\n\t\t\t\t<div className=\"alert alert-danger\" id=\"cancelAlert\" role=\"alert\">\n\t\t\t\t\tYou have canceled the registration.\n\t\t\t\t</div>\n\t\t\t\t<div className=\"alert alert-warning\" id=\"inputAlert\" role=\"alert\">\n\t\t\t\t\tInvalid percentage value, please enter a valid percentage value (1 up to 100).\n\t\t\t\t</div>\n\t\t\t\t<div id=\"tryAgainButton\">\n\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary btn-lg\" onClick={this.resetView}>Try again</button>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"okButton\">\n\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary btn-lg\" onClick={this.resetView}>Okay</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Refund;","/*\nCreated by Oualid Faouzi\n\nNOTE: Session storage is used to store sensitive information about the user.\nSession storage was NOT designed to be used as a secured storage mechanism in a browser.\nIf an attacker runs Javascript, they can retrieve all the data stored in the sessionstorage\nand send it off to their own domain. This issue can be solved by integrating a database to store the data.\n*/\n\nimport React from 'react';\n\n//Bootstrap dependencies are used to create responsive elements\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport Overview from './JS/ScreenComponents/Overview';\nimport Refund from './JS/ScreenComponents/Refund';\n\nfunction App() {\n  //Sessionstorage cleared every time the browser gets refreshed and numOfInvoicesRegistered is initialized to 0.\n  sessionStorage.clear();\n  sessionStorage.setItem(\"numOfInvoicesRegistered\", 0);\n  console.log(\"Session memory cleared.\")\n  return (\n    <Router>\n      <div>\n        <nav className=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n          <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\n            <ul className=\"navbar-nav\">\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\" to=\"/\">Overview</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\" to=\"/refund\">Refund</Link>\n              </li>\n            </ul>\n          </div>\n        </nav>\n        <Switch>\n          <Route path=\"/\" exact component={Overview}>\n            <Overview />\n          </Route>\n          <Route path=\"/refund\" exact component={Refund}>\n            <Refund />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","/*\nCreated by Oualid Faouzi\n*/\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}