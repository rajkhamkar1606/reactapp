(this.webpackJsonprefundapp=this.webpackJsonprefundapp||[]).push([[0],{29:function(e,t,n){e.exports=n(46)},34:function(e,t,n){},35:function(e,t){Number.prototype.toFixedDown=function(e){var t=new RegExp("(\\d+\\.\\d{"+e+"})(\\d)"),n=this.toString().match(t);return n?parseFloat(n[1]):this.valueOf()}},42:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),l=(n(16),n(21),n(14)),c=n(5),d=n(9),s=n(10),u=n(12),m=n(11),p=n(13),y=(n(34),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).breakLine=function(e){for(var t,n=0;n<2;n++)t=document.createElement("br"),e.appendChild(t)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t,n=sessionStorage.getItem("numOfInvoicesRegistered");if(0!=n){document.getElementById("infoMessage").style.display="block";for(var a=new Array(n),r=1,o=0;o<n;o++)a[o]=JSON.parse(sessionStorage.getItem("obj"+r.toString())),r++;for(var i=0;i<n;i++)(e=document.createElement("button")).setAttribute("class","list-group-item list-group-item-action"),e.setAttribute("id","button"+i),e.onclick=function(e,t){return function(){document.getElementById("obj"+e+"view").style.display="block",document.getElementById("goBackButton").style.display="block",document.getElementById("infoMessage").style.display="none";for(var n=0;n<t;n++)document.getElementById("button"+n).style.display="none"}}(i,n),c=document.createTextNode("Invoice Number: "+a[i].invoice_no+" - Description: "+a[i].description),e.appendChild(c),document.getElementById("invoiceList").appendChild(e),(t=document.createElement("div")).setAttribute("class","card card-body"),t.setAttribute("id","obj"+i+"view"),t.setAttribute("style","display: none;"),c=document.createTextNode("Invoice Number: "+a[i].invoice_no),t.appendChild(c),this.breakLine(t),c=document.createTextNode("Description: "+a[i].description),t.appendChild(c),this.breakLine(t),c=document.createTextNode("Sender: "+a[i].sender),t.appendChild(c),this.breakLine(t),c=document.createTextNode("Total cost (VAT included): "+a[i].amount+" EUR"),t.appendChild(c),this.breakLine(t),c=document.createTextNode("VAT rate: "+a[i].vat[0].rate+"%"),t.appendChild(c),this.breakLine(t),c=document.createTextNode("VAT: "+a[i].vat[0].amount+" EUR"),t.appendChild(c),this.breakLine(t),c=document.createTextNode("Total refund: "+a[i].refundAmount+" EUR"),t.appendChild(c),document.getElementById("invoiceList").appendChild(t)}else{var l,c;(l=document.createElement("p")).setAttribute("id","emptyMessage"),c=document.createTextNode("No invoices registered."),l.appendChild(c),document.getElementById("invoiceView").appendChild(l)}(e=document.createElement("button")).setAttribute("class","btn btn-secondary btn-lg"),e.setAttribute("id","goBackButton"),e.setAttribute("style","display: none;"),e.onclick=function(e){return function(){document.getElementById("goBackButton").style.display="none",document.getElementById("infoMessage").style.display="block";for(var t=0;t<e;t++)document.getElementById("obj"+t+"view").style.display="none",document.getElementById("button"+t).style.display="block"}}(n),e.innerHTML="Go Back",document.getElementById("invoiceList").appendChild(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"infoMessage"},"Click an item in the list for more information"),r.a.createElement("div",{id:"invoiceView"},r.a.createElement("div",{className:"list-group",id:"invoiceList"})))}}]),t}(a.Component)),g=(n(35),n(25)),v=n.n(g),f=n(17),E=n.n(f),b=(n(42),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={result:"No result",idList:["sender","invoiceNo","description","price","vatRate","vatAmount"],refundPercentage:0,refundAmount:0},n.handleScan=function(e){if(e&&"No result"===n.state.result){n.setState({result:JSON.parse(e)});var t=JSON.stringify(n.state.result.sender).replace(/"/g,""),a=JSON.stringify(n.state.result.invoice_no).replace(/"/g,""),r=JSON.stringify(n.state.result.description).replace(/"/g,""),o=JSON.stringify(n.state.result.amount),i=JSON.stringify(n.state.result.vat[0].rate),l=JSON.stringify(n.state.result.vat[0].amount),c=new Array(6),d=new Array(6),s=void 0;s=c.length;for(var u=0;u<s;u++)c[u]=document.createElement("p");d[0]=document.createTextNode("Sender: "+t),d[1]=document.createTextNode("Invoice number: "+a),d[2]=document.createTextNode("Product description: "+r),d[3]=document.createTextNode("Total price: "+o+" EUR"),d[4]=document.createTextNode("VAT rate: "+i+"%"),d[5]=document.createTextNode("VAT amount: "+l+" EUR"),s=d.length;for(var m=0;m<s;m++)c[m].appendChild(d[m]);s=n.state.idList.length;for(var p=0;p<s;p++)document.getElementById(n.state.idList[p]).appendChild(c[p]);document.getElementById("qrCanvas").style.display="none",document.getElementById("confirmationLayout").style.display="block"}},n.handleError=function(e){console.error(e)},n.clearDataView=function(){n.setState({result:"No result",refundPercentage:0,refundAmount:0});for(var e,t=n.state.idList.length,a=0;a<t;a++)e=n.state.idList[a],E()("#"+e).empty();document.getElementById("confirmationLayout").style.display="none"},n.confirmInvoice=function(){if(n.state.refundPercentage>=1&&n.state.refundPercentage<=100){n.state.result.refundPercentage=parseInt(n.state.refundPercentage),n.state.result.refundAmount=parseFloat(n.state.refundAmount);var e=sessionStorage.getItem("numOfInvoicesRegistered");e++,sessionStorage.setItem("obj"+e,JSON.stringify(n.state.result)),sessionStorage.setItem("numOfInvoicesRegistered",e),n.clearDataView(),document.getElementById("loaderView").style.display="block",setTimeout((function(){document.getElementById("loaderView").style.display="none",document.getElementById("okButton").style.display="block",document.getElementById("confirmationAlert").style.display="block"}),4e3)}else n.clearDataView(),document.getElementById("tryAgainButton").style.display="block",document.getElementById("inputAlert").style.display="block"},n.cancelInvoice=function(){n.clearDataView(),document.getElementById("tryAgainButton").style.display="block",document.getElementById("cancelAlert").style.display="block"},n.resetView=function(){n.clearDataView(),document.getElementById("tryAgainButton").style.display="none",document.getElementById("okButton").style.display="none",document.getElementById("qrCanvas").style.display="block",document.getElementById("inputAlert").style.display="none",document.getElementById("cancelAlert").style.display="none",document.getElementById("confirmationAlert").style.display="none",document.getElementById("loaderView").style.display="none"},n.handleChange=function(e){n.setState({refundPercentage:e.target.value});var t=document.getElementById("inputRefundPercentage").value;if(t>=1&&t<=100){var a=parseFloat(n.state.result.amount)*parseFloat(t/100);a=a.toFixedDown(2),document.getElementById("refundPrice").innerHTML="Price to be refunded: "+a+" EUR",n.setState({refundAmount:a})}else document.getElementById("refundPrice").innerHTML="Please enter a valid percentage value. (1 up to 100)"},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"loaderView"},r.a.createElement("p",{id:"loaderMessage"},"Saving invoice data..."),r.a.createElement("div",{className:"loader"})),r.a.createElement("div",{className:"qrCodeWindow",id:"qrCanvas"},r.a.createElement(v.a,{delay:300,onError:this.handleError,onScan:this.handleScan}),r.a.createElement("p",null,"Use the camera of your device and scan the QR code.")),r.a.createElement("div",{className:"myResults"},r.a.createElement("div",{id:"sender"}),r.a.createElement("div",{id:"invoiceNo"}),r.a.createElement("div",{id:"description"}),r.a.createElement("div",{id:"price"}),r.a.createElement("div",{id:"vatRate"}),r.a.createElement("div",{id:"vatAmount"})),r.a.createElement("div",{id:"confirmationLayout"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Specify the percentage of the invoice amount to be refunded (including VAT)"),r.a.createElement("input",{type:"number",className:"form-control",id:"inputRefundPercentage",value:this.state.refundPercentage,onChange:this.handleChange}))),r.a.createElement("p",{id:"refundPrice"},"Please enter a valid percentage value. (1 up to 100)"),r.a.createElement("p",null,"Do you want to refund this product?"),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.confirmInvoice},"Confirm"),r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-lg",onClick:this.cancelInvoice},"Cancel")),r.a.createElement("div",{className:"alert alert-success",id:"confirmationAlert",role:"alert"},"You have successfully registered this invoice to be refunded!"),r.a.createElement("div",{className:"alert alert-danger",id:"cancelAlert",role:"alert"},"You have canceled the registration."),r.a.createElement("div",{className:"alert alert-warning",id:"inputAlert",role:"alert"},"Invalid percentage value, please enter a valid percentage value (1 up to 100)."),r.a.createElement("div",{id:"tryAgainButton"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.resetView},"Try again")),r.a.createElement("div",{id:"okButton"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.resetView},"Okay")))}}]),t}(a.Component));var h=function(){return sessionStorage.clear(),sessionStorage.setItem("numOfInvoicesRegistered",0),console.log("Session memory cleared."),r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/"},"Overview")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/refund"},"Refund"))))),r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:y},r.a.createElement(y,null)),r.a.createElement(c.a,{path:"/refund",exact:!0,component:b},r.a.createElement(b,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.500d03db.chunk.js.map